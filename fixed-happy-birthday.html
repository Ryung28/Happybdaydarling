<!DOCTYPE html>
<html>
<head>
    <title>Happy Birthday</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="happy-birthday-master/happy-birthday-master/Happy Birthday_files/bootstrap.css">
    <link rel="stylesheet" href="happy-birthday-master/happy-birthday-master/Happy Birthday_files/style.css">
</head>

<body>
    <div>
        <div class="container">
            <div>
                <div class="row">
                    <div class="loader">
                        <button id="play">Start</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Audio element with multiple sources for better compatibility -->
    <audio id="birthday-song" class="song" controls loop>
        <source src="music.mp3" type="audio/mpeg">
        <source src="happy-birthday-master/happy-birthday-master/Happy Birthday_files/music.mp3" type="audio/mpeg">
        Your browser isn't invited for super fun audio time.
    </audio>

    <canvas id="confetti"></canvas>
    <div class="container pt-5">
        <div class="row">
            <div class="col-12 col-xl-6 mx-auto">
                <img src="happy-birthday-master/happy-birthday-master/Happy Birthday_files/banner.png" alt="">
            </div>
            <div class="col-12 text-center">
                <div id="name" class="area">Happy Birthday</div>
            </div>

            <div class="col-12 text-center">
                <div class="type-wrap">
                    <div id="typed-strings" class="typing">
                        <h2>Happy Birthday <i id="nae">Darling</i></h2>
                        <h2>Have a wonderful day</h2>
                        <h2>Filled with joy and happiness.</h2>
                    </div>
                    <span id="typed"></span>
                </div>
            </div>

            <div class="col-12 col-xl-6 mx-auto">
                <img src="happy-birthday-master/happy-birthday-master/Happy Birthday_files/cake.svg" alt="">
            </div>
        </div>
    </div>
    
    <img src="happy-birthday-master/happy-birthday-master/Happy Birthday_files/Balloon-Border.png" class="balloon-border" width="100%">

    <!-- Music Control Button -->
    <div class="music-control">
        <button id="music-toggle" class="music-btn">
            <i class="fas fa-music"></i>
            <span class="music-tooltip">Play Music</span>
        </button>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    <script src="happy-birthday-master/happy-birthday-master/Happy Birthday_files/snowflakes.js"></script>
    <script src="happy-birthday-master/happy-birthday-master/Happy Birthday_files/jquery.js"></script>
    <script src="happy-birthday-master/happy-birthday-master/Happy Birthday_files/typed.js"></script>
    <script>
    // Initialize snowflakes
    var sf = new Snowflakes({
        color: "#ffd700",
        minSize: 20
    });
    
    // Get name from URL if present
    var url_string = window.location.href;
    var url = new URL(url_string);
    var c = url.searchParams.get("name");
    if (c != null) {
        document.getElementById("name").innerHTML = c;
        document.getElementById("nae").innerHTML = c;
    }
    
    // Initialize music
    var musicPlaying = false;
    var backgroundMusic = document.getElementById('birthday-song');
    var musicToggleBtn = document.getElementById('music-toggle');
    
    // Play button click handler
    $('#play').click(function () {
        $(".loader").fadeOut("slow");
        sf.destroy();
        $('.balloon-border').animate({
            top: -500
        }, 8000);
        
        // Play music
        if (backgroundMusic) {
            backgroundMusic.play().then(() => {
                musicPlaying = true;
                if (musicToggleBtn) {
                    musicToggleBtn.classList.add('playing');
                }
            }).catch(error => {
                console.log('Autoplay prevented:', error);
            });
        }
    });
    
    // Music toggle button handler
    if (musicToggleBtn && backgroundMusic) {
        musicToggleBtn.addEventListener('click', function() {
            if (musicPlaying) {
                backgroundMusic.pause();
                musicPlaying = false;
                musicToggleBtn.classList.remove('playing');
                musicToggleBtn.querySelector('i').classList.replace('fa-pause', 'fa-music');
            } else {
                backgroundMusic.play().then(() => {
                    musicPlaying = true;
                    musicToggleBtn.classList.add('playing');
                    musicToggleBtn.querySelector('i').classList.replace('fa-music', 'fa-pause');
                }).catch(error => {
                    console.log('Manual play prevented:', error);
                });
            }
        });
    }
    
    // Initialize typed.js
    var typed = new Typed("#typed", {
        stringsElement: '#typed-strings',
        typeSpeed: 30,
        backSpeed: 10,
        loop: true
    });
    
    // Initialize confetti
    // (Confetti code would go here - simplified for this example)
    </script>
    <script src="happy-birthday-master/happy-birthday-master/Happy Birthday_files/script.js"></script>
</body>
</html>